'\" t
.\"     Title: sssd.conf
.\"    Author: The SSSD upstream - https://pagure.io/SSSD/sssd/
.\" Generator: DocBook XSL Stylesheets vsnapshot <http://docbook.sf.net/>
.\"      Date: 12/09/2020
.\"    Manual: File Formats and Conventions
.\"    Source: SSSD
.\"  Language: English
.\"
.TH "SSSD\&.CONF" "5" "12/09/2020" "SSSD" "File Formats and Conventions"
.\" -----------------------------------------------------------------
.\" * Define some portability stuff
.\" -----------------------------------------------------------------
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" http://bugs.debian.org/507673
.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH "NAME"
sssd.conf \- the configuration file for SSSD
.SH "FILE FORMAT"
.PP
The file has an ini\-style syntax and consists of sections and parameters\&. A section begins with the name of the section in square brackets and continues until the next section begins\&. An example of section with single and multi\-valued parameters:
.sp
.if n \{\
.RS 4
.\}
.nf
\fI[section]\fR
\fIkey\fR = \fIvalue\fR
\fIkey2\fR = \fIvalue2,value3\fR
            
.fi
.if n \{\
.RE
.\}
.PP
The data types used are string (no quotes needed), integer and bool (with values of
\(lqTRUE/FALSE\(rq)\&.
.PP
A comment line starts with a hash sign (\(lq#\(rq) or a semicolon (\(lq;\(rq)\&. Inline comments are not supported\&.
.PP
All sections can have an optional
\fIdescription\fR
parameter\&. Its function is only as a label for the section\&.
.PP
sssd\&.conf
must be a regular file, owned by root and only root may read from or write to the file\&.
.SH "CONFIGURATION SNIPPETS FROM INCLUDE DIRECTORY"
.PP
The configuration file
sssd\&.conf
will include configuration snippets using the include directory
conf\&.d\&. This feature is available if SSSD was compiled with libini version 1\&.3\&.0 or later\&.
.PP
Any file placed in
conf\&.d
that ends in
\(lq\&.conf\(rq
and does not begin with a dot (\(lq\&.\(rq) will be used together with
sssd\&.conf
to configure SSSD\&.
.PP
The configuration snippets from
conf\&.d
have higher priority than
sssd\&.conf
and will override
sssd\&.conf
when conflicts occur\&. If several snippets are present in
conf\&.d, then they are included in alphabetical order (based on locale)\&. Files included later have higher priority\&. Numerical prefixes (01_snippet\&.conf,
02_snippet\&.conf
etc\&.) can help visualize the priority (higher number means higher priority)\&.
.PP
The snippet files require the same owner and permissions as
sssd\&.conf\&. Which are by default root:root and 0600\&.
.SH "GENERAL OPTIONS"
.PP
Following options are usable in more than one configuration sections\&.
.SS "Options usable in all sections"
.PP
.PP
debug_level (integer)
.RS 4
SSSD supports two representations for specifying the debug level\&. The simplest is to specify a decimal value from 0\-9, which represents enabling that level and all lower\-level debug messages\&. The more comprehensive option is to specify a hexadecimal bitmask to enable or disable specific levels (such as if you wish to suppress a level)\&.
.sp
Please note that each SSSD service logs into its own log file\&. Also please note that enabling
\(lqdebug_level\(rq
in the
\(lq[sssd]\(rq
section only enables debugging just for the sssd process itself, not for the responder or provider processes\&. The
\(lqdebug_level\(rq
parameter should be added to all sections that you wish to produce debug logs from\&.
.sp
In addition to changing the log level in the config file using the
\(lqdebug_level\(rq
parameter, which is persistent, but requires SSSD restart, it is also possible to change the debug level on the fly using the
\fBsss_debuglevel\fR(8)
tool\&.
.sp
Currently supported debug levels:
.sp
\fI0\fR,
\fI0x0010\fR: Fatal failures\&. Anything that would prevent SSSD from starting up or causes it to cease running\&.
.sp
\fI1\fR,
\fI0x0020\fR: Critical failures\&. An error that doesn\*(Aqt kill SSSD, but one that indicates that at least one major feature is not going to work properly\&.
.sp
\fI2\fR,
\fI0x0040\fR: Serious failures\&. An error announcing that a particular request or operation has failed\&.
.sp
\fI3\fR,
\fI0x0080\fR: Minor failures\&. These are the errors that would percolate down to cause the operation failure of 2\&.
.sp
\fI4\fR,
\fI0x0100\fR: Configuration settings\&.
.sp
\fI5\fR,
\fI0x0200\fR: Function data\&.
.sp
\fI6\fR,
\fI0x0400\fR: Trace messages for operation functions\&.
.sp
\fI7\fR,
\fI0x1000\fR: Trace messages for internal control functions\&.
.sp
\fI8\fR,
\fI0x2000\fR: Contents of function\-internal variables that may be interesting\&.
.sp
\fI9\fR,
\fI0x4000\fR: Extremely low\-level tracing information\&.
.sp
To log required bitmask debug levels, simply add their numbers together as shown in following examples:
.sp
\fIExample\fR: To log fatal failures, critical failures, serious failures and function data use 0x0270\&.
.sp
\fIExample\fR: To log fatal failures, configuration settings, function data, trace messages for internal control functions use 0x1310\&.
.sp
\fINote\fR: The bitmask format of debug levels was introduced in 1\&.7\&.0\&.
.sp
\fIDefault\fR: 0
.RE
.PP
debug (integer)
.RS 4
SSSD 1\&.14 and later also includes the
\fIdebug\fR
alias for
\fIdebug_level\fR
as a convenience feature\&. If both are specified, the value of
\fIdebug_level\fR
will be used\&.
.RE
.PP
debug_timestamps (bool)
.RS 4
Add a timestamp to the debug messages\&. If journald is enabled for SSSD debug logging this option is ignored\&.
.sp
Default: true
.RE
.PP
debug_microseconds (bool)
.RS 4
Add microseconds to the timestamp in debug messages\&. If journald is enabled for SSSD debug logging this option is ignored\&.
.sp
Default: false
.RE
.SS "Options usable in SERVICE and DOMAIN sections"
.PP
.PP
timeout (integer)
.RS 4
Timeout in seconds between heartbeats for this service\&. This is used to ensure that the process is alive and capable of answering requests\&. Note that after three missed heartbeats the process will terminate itself\&.
.sp
Default: 10
.RE
.SH "SPECIAL SECTIONS"
.SS "The [sssd] section"
.PP
Individual pieces of SSSD functionality are provided by special SSSD services that are started and stopped together with SSSD\&. The services are managed by a special service frequently called
\(lqmonitor\(rq\&. The
\(lq[sssd]\(rq
section is used to configure the monitor as well as some other important options like the identity domains\&.
.PP
\fBSection parameters\fR
.PP
config_file_version (integer)
.RS 4
Indicates what is the syntax of the config file\&. SSSD 0\&.6\&.0 and later use version 2\&.
.RE
.PP
services
.RS 4
Comma separated list of services that are started when sssd itself starts\&.
.sp
Supported services: nss, pam
, sudo
, autofs
, ssh
, pac
, ifp
.sp
.RE
.PP
reconnection_retries (integer)
.RS 4
Number of times services should attempt to reconnect in the event of a Data Provider crash or restart before they give up
.sp
Default: 3
.RE
.PP
domains
.RS 4
A domain is a database containing user information\&. SSSD can use more domains at the same time, but at least one must be configured or SSSD won\*(Aqt start\&. This parameter describes the list of domains in the order you want them to be queried\&. A domain name should only consist of alphanumeric ASCII characters, dashes, dots and underscores\&.
.RE
.PP
re_expression (string)
.RS 4
Default regular expression that describes how to parse the string containing user name and domain into these components\&.
.sp
Each domain can have an individual regular expression configured\&. For some ID providers there are also default regular expressions\&. See DOMAIN SECTIONS for more info on these regular expressions\&.
.RE
.PP
full_name_format (string)
.RS 4
A
\fBprintf\fR(3)\-compatible format that describes how to compose a fully qualified name from user name and domain name components\&.
.sp
The following expansions are supported:
.PP
%1$s
.RS 4
user name
.RE
.PP
%2$s
.RS 4
domain name as specified in the SSSD config file\&.
.RE
.PP
%3$s
.RS 4
domain flat name\&. Mostly usable for Active Directory domains, both directly configured or discovered via IPA trusts\&.
.RE
.sp
Each domain can have an individual format string configured\&. see DOMAIN SECTIONS for more info on this option\&.
.RE
.PP
monitor_resolv_conf (boolean)
.RS 4
Controls if SSSD should monitor the state of resolv\&.conf to identify when it needs to update its internal DNS resolver\&.
.sp
Default: true
.RE
.PP
try_inotify (boolean)
.RS 4
By default, SSSD will attempt to use inotify to monitor configuration files changes and will fall back to polling every five seconds if inotify cannot be used\&.
.sp
There are some limited situations where it is preferred that we should skip even trying to use inotify\&. In these rare cases, this option should be set to \*(Aqfalse\*(Aq
.sp
Default: true on platforms where inotify is supported\&. False on other platforms\&.
.sp
Note: this option will have no effect on platforms where inotify is unavailable\&. On these platforms, polling will always be used\&.
.RE
.PP
krb5_rcache_dir (string)
.RS 4
Directory on the filesystem where SSSD should store Kerberos replay cache files\&.
.sp
This option accepts a special value __LIBKRB5_DEFAULTS__ that will instruct SSSD to let libkrb5 decide the appropriate location for the replay cache\&.
.sp
Default: Distribution\-specific and specified at build\-time\&. (__LIBKRB5_DEFAULTS__ if not configured)
.RE
.PP
user (string)
.RS 4
The user to drop the privileges to where appropriate to avoid running as the root user\&.
.sp
Default: not set, process will run as root
.RE
.PP
default_domain_suffix (string)
.RS 4
This string will be used as a default domain name for all names without a domain name component\&. The main use case is environments where the primary domain is intended for managing host policies and all users are located in a trusted domain\&. The option allows those users to log in just with their user name without giving a domain name as well\&.
.sp
Please note that if this option is set all users from the primary domain have to use their fully qualified name, e\&.g\&. user@domain\&.name, to log in\&. Setting this option changes default of use_fully_qualified_names to True\&. It is not allowed to use this option together with use_fully_qualified_names set to False\&. One exception from this rule are domains with
\(lqid_provider=files\(rq
that always try to match the behaviour of nss_files and therefore their output is not qualified even when the default_domain_suffix option is used\&.
.sp
Default: not set
.RE
.PP
override_space (string)
.RS 4
This parameter will replace spaces (space bar) with the given character for user and group names\&. e\&.g\&. (_)\&. User name "john doe" will be "john_doe" This feature was added to help compatibility with shell scripts that have difficulty handling spaces, due to the default field separator in the shell\&.
.sp
Please note it is a configuration error to use a replacement character that might be used in user or group names\&. If a name contains the replacement character SSSD tries to return the unmodified name but in general the result of a lookup is undefined\&.
.sp
Default: not set (spaces will not be replaced)
.RE
.PP
certificate_verification (string)
.RS 4
With this parameter the certificate verification can be tuned with a comma separated list of options\&. Supported options are:
.PP
no_ocsp
.RS 4
Disables Online Certificate Status Protocol (OCSP) checks\&. This might be needed if the OCSP servers defined in the certificate are not reachable from the client\&.
.RE
.PP
soft_ocsp
.RS 4
(NSS Version) This option is ignored\&.
.sp
(OpenSSL Version) If a connection cannot be established to an OCSP responder the OCSP check is skipped\&. This option should be used to allow authentication when the system is offline and the OCSP responder cannot be reached\&.
.RE
.PP
ocsp_dgst
.RS 4
Digest (hash) function used to create the certificate ID for the OCSP request\&. Allowed values are:
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
sha1
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
sha256
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
sha384
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
sha512
.RE
.sp
Default: sha256
.sp
(NSS Version) This option is ignored, because NSS uses sha1 unconditionally\&.
.RE
.PP
no_verification
.RS 4
Disables verification completely\&. This option should only be used for testing\&.
.RE
.PP
ocsp_default_responder=URL
.RS 4
Sets the OCSP default responder which should be used instead of the one mentioned in the certificate\&. URL must be replaced with the URL of the OCSP default responder e\&.g\&. http://example\&.com:80/ocsp\&.
.sp
(NSS Version) This option must be used together with ocsp_default_responder_signing_cert\&.
.RE
.PP
ocsp_default_responder_signing_cert=NAME
.RS 4
(NSS Version) The nickname of the cert to trust (expected) to sign the OCSP responses\&. The certificate with the given nickname must be available in the systems NSS database\&.
.sp
This option must be used together with ocsp_default_responder\&.
.sp
(OpenSSL version) This option is currently ignored\&. All needed certificates must be available in the PEM file given by pam_cert_db_path\&.
.RE
.PP
crl_file=/PATH/TO/CRL/FILE
.RS 4
(NSS Version) This option is ignored, please see
\fBcrlutil\fR(1)
how to import a Certificate Revocation List (CRL) into a NSS database\&.
.sp
(OpenSSL Version) Use the Certificate Revocation List (CRL) from the given file during the verification of the certificate\&. The CRL must be given in PEM format, see
\fBcrl\fR(1ssl)
for details\&.
.RE
.PP
soft_crl
.RS 4
(NSS Version) This option is ignored\&.
.sp
(OpenSSL Version) If a Certificate Revocation List (CRL) is expired ignore the CRL checks for the related certificates\&. This option should be used to allow authentication when the system is offline and the CRL cannot be renewed\&.
.RE
.sp
This man page was generated for the NSS version\&.
.sp
Unknown options are reported but ignored\&.
.sp
Default: not set, i\&.e\&. do not restrict certificate verification
.RE
.PP
disable_netlink (boolean)
.RS 4
SSSD hooks into the netlink interface to monitor changes to routes, addresses, links and trigger certain actions\&.
.sp
The SSSD state changes caused by netlink events may be undesirable and can be disabled by setting this option to \*(Aqtrue\*(Aq
.sp
Default: false (netlink changes are detected)
.RE
.PP
enable_files_domain (boolean)
.RS 4
When this option is enabled, SSSD prepends an implicit domain with
\(lqid_provider=files\(rq
before any explicitly configured domains\&.
.sp
Default: false
.RE
.PP
domain_resolution_order
.RS 4
Comma separated list of domains and subdomains representing the lookup order that will be followed\&. The list doesn\*(Aqt have to include all possible domains as the missing domains will be looked up based on the order they\*(Aqre presented in the
\(lqdomains\(rq
configuration option\&. The subdomains which are not listed as part of
\(lqlookup_order\(rq
will be looked up in a random order for each parent domain\&.
.sp
Please, note that when this option is set the output format of all commands is always fully\-qualified even when using short names for input, for all users but the ones managed by the files provider\&. In case the administrator wants the output not fully\-qualified, the full_name_format option can be used as shown below:
\(lqfull_name_format=%1$s\(rq
However, keep in mind that during login, login applications often canonicalize the username by calling
\fBgetpwnam\fR(3)
which, if a shortname is returned for a qualified input (while trying to reach a user which exists in multiple domains) might re\-route the login attempt into the domain which uses shortnames, making this workaround totally not recommended in cases where usernames may overlap between domains\&.
.sp
Default: Not set
.RE
.SH "SERVICES SECTIONS"
.PP
Settings that can be used to configure different services are described in this section\&. They should reside in the [\fI$NAME\fR] section, for example, for NSS service, the section would be
\(lq[nss]\(rq
.SS "General service configuration options"
.PP
These options can be used to configure any service\&.
.PP
reconnection_retries (integer)
.RS 4
Number of times services should attempt to reconnect in the event of a Data Provider crash or restart before they give up
.sp
Default: 3
.RE
.PP
fd_limit
.RS 4
This option specifies the maximum number of file descriptors that may be opened at one time by this SSSD process\&. On systems where SSSD is granted the CAP_SYS_RESOURCE capability, this will be an absolute setting\&. On systems without this capability, the resulting value will be the lower value of this or the limits\&.conf "hard" limit\&.
.sp
Default: 8192 (or limits\&.conf "hard" limit)
.RE
.PP
client_idle_timeout
.RS 4
This option specifies the number of seconds that a client of an SSSD process can hold onto a file descriptor without communicating on it\&. This value is limited in order to avoid resource exhaustion on the system\&. The timeout can\*(Aqt be shorter than 10 seconds\&. If a lower value is configured, it will be adjusted to 10 seconds\&.
.sp
Default: 60
.RE
.PP
offline_timeout (integer)
.RS 4
When SSSD switches to offline mode the amount of time before it tries to go back online will increase based upon the time spent disconnected\&. This value is in seconds and calculated by the following:
.sp
offline_timeout + random_offset
.sp
The random offset can increment up to 30 seconds\&. After each unsuccessful attempt to go online, the new interval is recalculated by the following:
.sp
new_interval = old_interval*2 + random_offset
.sp
Note that the maximum length of each interval is currently limited to one hour\&. If the calculated length of new_interval is greater than an hour, it will be forced to one hour\&.
.sp
Default: 60
.RE
.PP
responder_idle_timeout
.RS 4
This option specifies the number of seconds that an SSSD responder process can be up without being used\&. This value is limited in order to avoid resource exhaustion on the system\&. The minimum acceptable value for this option is 60 seconds\&. Setting this option to 0 (zero) means that no timeout will be set up to the responder\&. This option only has effect when SSSD is built with systemd support and when services are either socket or D\-Bus activated\&.
.sp
Default: 300
.RE
.PP
cache_first
.RS 4
This option specifies whether the responder should query all caches before querying the Data Providers\&.
.sp
Default: false
.RE
.SS "NSS configuration options"
.PP
These options can be used to configure the Name Service Switch (NSS) service\&.
.PP
enum_cache_timeout (integer)
.RS 4
How many seconds should nss_sss cache enumerations (requests for info about all users)
.sp
Default: 120
.RE
.PP
entry_cache_nowait_percentage (integer)
.RS 4
The entry cache can be set to automatically update entries in the background if they are requested beyond a percentage of the entry_cache_timeout value for the domain\&.
.sp
For example, if the domain\*(Aqs entry_cache_timeout is set to 30s and entry_cache_nowait_percentage is set to 50 (percent), entries that come in after 15 seconds past the last cache update will be returned immediately, but the SSSD will go and update the cache on its own, so that future requests will not need to block waiting for a cache update\&.
.sp
Valid values for this option are 0\-99 and represent a percentage of the entry_cache_timeout for each domain\&. For performance reasons, this percentage will never reduce the nowait timeout to less than 10 seconds\&. (0 disables this feature)
.sp
Default: 50
.RE
.PP
entry_negative_timeout (integer)
.RS 4
Specifies for how many seconds nss_sss should cache negative cache hits (that is, queries for invalid database entries, like nonexistent ones) before asking the back end again\&.
.sp
Default: 15
.RE
.PP
local_negative_timeout (integer)
.RS 4
Specifies for how many seconds nss_sss should keep local users and groups in negative cache before trying to look it up in the back end again\&. Setting the option to 0 disables this feature\&.
.sp
Default: 14400 (4 hours)
.RE
.PP
filter_users, filter_groups (string)
.RS 4
Exclude certain users or groups from being fetched from the sss NSS database\&. This is particularly useful for system accounts\&. This option can also be set per\-domain or include fully\-qualified names to filter only users from the particular domain or by a user principal name (UPN)\&.
.sp
NOTE: The filter_groups option doesn\*(Aqt affect inheritance of nested group members, since filtering happens after they are propagated for returning via NSS\&. E\&.g\&. a group having a member group filtered out will still have the member users of the latter listed\&.
.sp
Default: root
.RE
.PP
filter_users_in_groups (bool)
.RS 4
If you want filtered user still be group members set this option to false\&.
.sp
Default: true
.RE
.PP
override_homedir (string)
.RS 4
Override the user\*(Aqs home directory\&. You can either provide an absolute value or a template\&. In the template, the following sequences are substituted:
.PP
%u
.RS 4
login name
.RE
.PP
%U
.RS 4
UID number
.RE
.PP
%d
.RS 4
domain name
.RE
.PP
%f
.RS 4
fully qualified user name (user@domain)
.RE
.PP
%l
.RS 4
The first letter of the login name\&.
.RE
.PP
%P
.RS 4
UPN \- User Principal Name (name@REALM)
.RE
.PP
%o
.RS 4
The original home directory retrieved from the identity provider\&.
.RE
.PP
%H
.RS 4
The value of configure option
\fIhomedir_substring\fR\&.
.RE
.PP
%%
.RS 4
a literal \*(Aq%\*(Aq
.RE
.sp
This option can also be set per\-domain\&.
.sp
example:
.sp
.if n \{\
.RS 4
.\}
.nf
override_homedir = /home/%u
        
.fi
.if n \{\
.RE
.\}
.sp
Default: Not set (SSSD will use the value retrieved from LDAP)
.RE
.PP
homedir_substring (string)
.RS 4
The value of this option will be used in the expansion of the
\fIoverride_homedir\fR
option if the template contains the format string
\fI%H\fR\&. An LDAP directory entry can directly contain this template so that this option can be used to expand the home directory path for each client machine (or operating system)\&. It can be set per\-domain or globally in the [nss] section\&. A value specified in a domain section will override one set in the [nss] section\&.
.sp
Default: /home
.RE
.PP
fallback_homedir (string)
.RS 4
Set a default template for a user\*(Aqs home directory if one is not specified explicitly by the domain\*(Aqs data provider\&.
.sp
The available values for this option are the same as for override_homedir\&.
.sp
example:
.sp
.if n \{\
.RS 4
.\}
.nf
fallback_homedir = /home/%u
                            
.fi
.if n \{\
.RE
.\}
.sp
Default: not set (no substitution for unset home directories)
.RE
.PP
override_shell (string)
.RS 4
Override the login shell for all users\&. This option supersedes any other shell options if it takes effect and can be set either in the [nss] section or per\-domain\&.
.sp
Default: not set (SSSD will use the value retrieved from LDAP)
.RE
.PP
allowed_shells (string)
.RS 4
Restrict user shell to one of the listed values\&. The order of evaluation is:
.sp
1\&. If the shell is present in
\(lq/etc/shells\(rq, it is used\&.
.sp
2\&. If the shell is in the allowed_shells list but not in
\(lq/etc/shells\(rq, use the value of the shell_fallback parameter\&.
.sp
3\&. If the shell is not in the allowed_shells list and not in
\(lq/etc/shells\(rq, a nologin shell is used\&.
.sp
The wildcard (*) can be used to allow any shell\&.
.sp
The (*) is useful if you want to use shell_fallback in case that user\*(Aqs shell is not in
\(lq/etc/shells\(rq
and maintaining list of all allowed shells in allowed_shells would be to much overhead\&.
.sp
An empty string for shell is passed as\-is to libc\&.
.sp
The
\(lq/etc/shells\(rq
is only read on SSSD start up, which means that a restart of the SSSD is required in case a new shell is installed\&.
.sp
Default: Not set\&. The user shell is automatically used\&.
.RE
.PP
vetoed_shells (string)
.RS 4
Replace any instance of these shells with the shell_fallback
.RE
.PP
shell_fallback (string)
.RS 4
The default shell to use if an allowed shell is not installed on the machine\&.
.sp
Default: /bin/sh
.RE
.PP
default_shell
.RS 4
The default shell to use if the provider does not return one during lookup\&. This option can be specified globally in the [nss] section or per\-domain\&.
.sp
Default: not set (Return NULL if no shell is specified and rely on libc to substitute something sensible when necessary, usually /bin/sh)
.RE
.PP
get_domains_timeout (int)
.RS 4
Specifies time in seconds for which the list of subdomains will be considered valid\&.
.sp
Default: 60
.RE
.PP
memcache_timeout (int)
.RS 4
Specifies time in seconds for which records in the in\-memory cache will be valid\&. Setting this option to zero will disable the in\-memory cache\&.
.sp
Default: 300
.sp
WARNING: Disabling the in\-memory cache will have significant negative impact on SSSD\*(Aqs performance and should only be used for testing\&.
.sp
NOTE: If the environment variable SSS_NSS_USE_MEMCACHE is set to "NO", client applications will not use the fast in\-memory cache\&.
.RE
.PP
user_attributes (string)
.RS 4
Some of the additional NSS responder requests can return more attributes than just the POSIX ones defined by the NSS interface\&. The list of attributes is controlled by this option\&. It is handled the same way as the
\(lquser_attributes\(rq
option of the InfoPipe responder (see
\fBsssd-ifp\fR(5)
for details) but with no default values\&.
.sp
To make configuration more easy the NSS responder will check the InfoPipe option if it is not set for the NSS responder\&.
.sp
Default: not set, fallback to InfoPipe option
.RE
.PP
pwfield (string)
.RS 4
The value that NSS operations that return users or groups will return for the
\(lqpassword\(rq
field\&.
.sp
This option can also be set per\-domain\&.
.sp
Default:
\(lq*\(rq
(remote domains) or
\(lqx\(rq
(the files domain)
.RE
.SS "PAM configuration options"
.PP
These options can be used to configure the Pluggable Authentication Module (PAM) service\&.
.PP
offline_credentials_expiration (integer)
.RS 4
If the authentication provider is offline, how long should we allow cached logins (in days since the last successful online login)\&.
.sp
Default: 0 (No limit)
.RE
.PP
offline_failed_login_attempts (integer)
.RS 4
If the authentication provider is offline, how many failed login attempts are allowed\&.
.sp
Default: 0 (No limit)
.RE
.PP
offline_failed_login_delay (integer)
.RS 4
The time in minutes which has to pass after offline_failed_login_attempts has been reached before a new login attempt is possible\&.
.sp
If set to 0 the user cannot authenticate offline if offline_failed_login_attempts has been reached\&. Only a successful online authentication can enable offline authentication again\&.
.sp
Default: 5
.RE
.PP
pam_verbosity (integer)
.RS 4
Controls what kind of messages are shown to the user during authentication\&. The higher the number to more messages are displayed\&.
.sp
Currently sssd supports the following values:
.sp
\fI0\fR: do not show any message
.sp
\fI1\fR: show only important messages
.sp
\fI2\fR: show informational messages
.sp
\fI3\fR: show all messages and debug information
.sp
Default: 1
.RE
.PP
pam_response_filter (integer)
.RS 4
A comma separated list of strings which allows to remove (filter) data sent by the PAM responder to pam_sss PAM module\&. There are different kind of responses sent to pam_sss e\&.g\&. messages displayed to the user or environment variables which should be set by pam_sss\&.
.sp
While messages already can be controlled with the help of the pam_verbosity option this option allows to filter out other kind of responses as well\&.
.sp
Currently the following filters are supported:
.PP
ENV
.RS 4
Do not send any environment variables to any service\&.
.RE
.PP
ENV:var_name
.RS 4
Do not send environment variable var_name to any service\&.
.RE
.PP
ENV:var_name:service
.RS 4
Do not send environment variable var_name to service\&.
.RE
.sp
Default: not set
.sp
Example: ENV:KRB5CCNAME:sudo\-i
.RE
.PP
pam_id_timeout (integer)
.RS 4
For any PAM request while SSSD is online, the SSSD will attempt to immediately update the cached identity information for the user in order to ensure that authentication takes place with the latest information\&.
.sp
A complete PAM conversation may perform multiple PAM requests, such as account management and session opening\&. This option controls (on a per\-client\-application basis) how long (in seconds) we can cache the identity information to avoid excessive round\-trips to the identity provider\&.
.sp
Default: 5
.RE
.PP
pam_pwd_expiration_warning (integer)
.RS 4
Display a warning N days before the password expires\&.
.sp
Please note that the backend server has to provide information about the expiration time of the password\&. If this information is missing, sssd cannot display a warning\&.
.sp
If zero is set, then this filter is not applied, i\&.e\&. if the expiration warning was received from backend server, it will automatically be displayed\&.
.sp
This setting can be overridden by setting
\fIpwd_expiration_warning\fR
for a particular domain\&.
.sp
Default: 0
.RE
.PP
get_domains_timeout (int)
.RS 4
Specifies time in seconds for which the list of subdomains will be considered valid\&.
.sp
Default: 60
.RE
.PP
pam_trusted_users (string)
.RS 4
Specifies the comma\-separated list of UID values or user names that are allowed to run PAM conversations against trusted domains\&. Users not included in this list can only access domains marked as public with
\(lqpam_public_domains\(rq\&. User names are resolved to UIDs at startup\&.
.sp
Default: All users are considered trusted by default
.sp
Please note that UID 0 is always allowed to access the PAM responder even in case it is not in the pam_trusted_users list\&.
.RE
.PP
pam_public_domains (string)
.RS 4
Specifies the comma\-separated list of domain names that are accessible even to untrusted users\&.
.sp
Two special values for pam_public_domains option are defined:
.sp
all (Untrusted users are allowed to access all domains in PAM responder\&.)
.sp
none (Untrusted users are not allowed to access any domains PAM in responder\&.)
.sp
Default: none
.RE
.PP
pam_account_expired_message (string)
.RS 4
Allows a custom expiration message to be set, replacing the default \*(AqPermission denied\*(Aq message\&.
.sp
Note: Please be aware that message is only printed for the SSH service unless pam_verbosity is set to 3 (show all messages and debug information)\&.
.sp
example:
.sp
.if n \{\
.RS 4
.\}
.nf
pam_account_expired_message = Account expired, please contact help desk\&.
                            
.fi
.if n \{\
.RE
.\}
.sp
Default: none
.RE
.PP
pam_account_locked_message (string)
.RS 4
Allows a custom lockout message to be set, replacing the default \*(AqPermission denied\*(Aq message\&.
.sp
example:
.sp
.if n \{\
.RS 4
.\}
.nf
pam_account_locked_message = Account locked, please contact help desk\&.
                            
.fi
.if n \{\
.RE
.\}
.sp
Default: none
.RE
.PP
pam_cert_auth (bool)
.RS 4
Enable certificate based Smartcard authentication\&. Since this requires additional communication with the Smartcard which will delay the authentication process this option is disabled by default\&.
.sp
Default: False
.RE
.PP
pam_cert_db_path (string)
.RS 4
The path to the certificate database which contain the PKCS#11 modules to access the Smartcard\&.
.sp
Default:
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
/etc/pki/nssdb (NSS version, path to a NSS database)
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
/etc/sssd/pki/sssd_auth_ca_db\&.pem (OpenSSL version, path to a file with trusted CA certificates in PEM format)
.RE
.sp
This man page was generated for the NSS version\&.
.RE
.PP
p11_child_timeout (integer)
.RS 4
How many seconds will pam_sss wait for p11_child to finish\&.
.sp
Default: 10
.RE
.PP
pam_app_services (string)
.RS 4
Which PAM services are permitted to contact domains of type
\(lqapplication\(rq
.sp
Default: Not set
.RE
.PP
pam_p11_allowed_services (integer)
.RS 4
A comma\-separated list of PAM service names for which it will be allowed to use Smartcards\&.
.sp
It is possible to add another PAM service name to the default set by using
\(lq+service_name\(rq
or to explicitly remove a PAM service name from the default set by using
\(lq\-service_name\(rq\&. For example, in order to replace a default PAM service name for authentication with Smartcards (e\&.g\&.
\(lqlogin\(rq) with a custom PAM service name (e\&.g\&.
\(lqmy_pam_service\(rq), you would use the following configuration:
.sp
.if n \{\
.RS 4
.\}
.nf
pam_p11_allowed_services = +my_pam_service, \-login
                            
.fi
.if n \{\
.RE
.\}
.sp
Default: the default set of PAM service names includes:
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
login
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
su
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
su\-l
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
gdm\-smartcard
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
gdm\-password
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
kdm
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
sudo
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
sudo\-i
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
gnome\-screensaver
.RE
.sp
.RE
.PP
p11_wait_for_card_timeout (integer)
.RS 4
If Smartcard authentication is required how many extra seconds in addition to p11_child_timeout should the PAM responder wait until a Smartcard is inserted\&.
.sp
Default: 60
.RE
.PP
p11_uri (string)
.RS 4
PKCS#11 URI (see RFC\-7512 for details) which can be used to restrict the selection of devices used for Smartcard authentication\&. By default SSSD\*(Aqs p11_child will search for a PKCS#11 slot (reader) where the \*(Aqremovable\*(Aq flags is set and read the certificates from the inserted token from the first slot found\&. If multiple readers are connected p11_uri can be used to tell p11_child to use a specific reader\&.
.sp
Example:
.sp
.if n \{\
.RS 4
.\}
.nf
p11_uri = slot\-description=My%20Smartcar%20Reader
                            
.fi
.if n \{\
.RE
.\}
.sp
or
.sp
.if n \{\
.RS 4
.\}
.nf
p11_uri = library\-description=OpenSC%20smartcard%20framework;slot\-id=2
                            
.fi
.if n \{\
.RE
.\}
.sp
To find suitable URI please check the debug output of p11_child\&. As an alternative the GnuTLS utility \*(Aqp11tool\*(Aq with e\&.g\&. the \*(Aq\-\-list\-all\*(Aq will show PKCS#11 URIs as well\&.
.sp
Default: none
.RE
.SS "SUDO configuration options"
.PP
These options can be used to configure the sudo service\&. The detailed instructions for configuration of
\fBsudo\fR(8)
to work with
\fBsssd\fR(8)
are in the manual page
\fBsssd-sudo\fR(5)\&.
.PP
sudo_timed (bool)
.RS 4
Whether or not to evaluate the sudoNotBefore and sudoNotAfter attributes that implement time\-dependent sudoers entries\&.
.sp
Default: false
.RE
.PP
sudo_threshold (integer)
.RS 4
Maximum number of expired rules that can be refreshed at once\&. If number of expired rules is below threshold, those rules are refreshed with
\(lqrules refresh\(rq
mechanism\&. If the threshold is exceeded a
\(lqfull refresh\(rq
of sudo rules is triggered instead\&. This threshold number also applies to IPA sudo command and command group searches\&.
.sp
Default: 50
.RE
.SS "AUTOFS configuration options"
.PP
These options can be used to configure the autofs service\&.
.PP
autofs_negative_timeout (integer)
.RS 4
Specifies for how many seconds should the autofs responder negative cache hits (that is, queries for invalid map entries, like nonexistent ones) before asking the back end again\&.
.sp
Default: 15
.RE
.PP
Please note that the automounter only reads the master map on startup, so if any autofs\-related changes are made to the sssd\&.conf, you typically also need to restart the automounter daemon after restarting the SSSD\&.
.SS "SSH configuration options"
.PP
These options can be used to configure the SSH service\&.
.PP
ssh_hash_known_hosts (bool)
.RS 4
Whether or not to hash host names and addresses in the managed known_hosts file\&.
.sp
Default: true
.RE
.PP
ssh_known_hosts_timeout (integer)
.RS 4
How many seconds to keep a host in the managed known_hosts file after its host keys were requested\&.
.sp
Default: 180
.RE
.PP
ssh_use_certificate_keys (bool)
.RS 4
If set to true the
\fBsss_ssh_authorizedkeys\fR
will return ssh keys derived from the public key of X\&.509 certificates stored in the user entry as well\&. See
\fBsss_ssh_authorizedkeys\fR(1)
for details\&.
.sp
Default: true
.RE
.PP
ssh_use_certificate_matching_rules (string)
.RS 4
By default the ssh responder will use all available certificate matching rules to filter the certificates so that ssh keys are only derived from the matching ones\&. With this option the used rules can be restricted with a comma separated list of mapping and matching rule names\&. All other rules will be ignored\&.
.sp
If a non\-existing rule name is given all rules will be ignored and all available certificates will be used to derive ssh keys\&.
.sp
Default: not set, all found rules are used
.RE
.PP
ca_db (string)
.RS 4
Path to a storage of trusted CA certificates\&. The option is used to validate user certificates before deriving public ssh keys from them\&.
.sp
Default:
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
/etc/pki/nssdb (NSS version, path to a NSS database)
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
/etc/sssd/pki/sssd_auth_ca_db\&.pem (OpenSSL version, path to a file with trusted CA certificates in PEM format)
.RE
.sp
This man page was generated for the NSS version\&.
.RE
.SS "PAC responder configuration options"
.PP
The PAC responder works together with the authorization data plugin for MIT Kerberos sssd_pac_plugin\&.so and a sub\-domain provider\&. The plugin sends the PAC data during a GSSAPI authentication to the PAC responder\&. The sub\-domain provider collects domain SID and ID ranges of the domain the client is joined to and of remote trusted domains from the local domain controller\&. If the PAC is decoded and evaluated some of the following operations are done:
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
If the remote user does not exist in the cache, it is created\&. The UID is determined with the help of the SID, trusted domains will have UPGs and the GID will have the same value as the UID\&. The home directory is set based on the subdomain_homedir parameter\&. The shell will be empty by default, i\&.e\&. the system defaults are used, but can be overwritten with the default_shell parameter\&.
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
If there are SIDs of groups from domains sssd knows about, the user will be added to those groups\&.
.RE
.PP
These options can be used to configure the PAC responder\&.
.PP
allowed_uids (string)
.RS 4
Specifies the comma\-separated list of UID values or user names that are allowed to access the PAC responder\&. User names are resolved to UIDs at startup\&.
.sp
Default: 0 (only the root user is allowed to access the PAC responder)
.sp
Please note that although the UID 0 is used as the default it will be overwritten with this option\&. If you still want to allow the root user to access the PAC responder, which would be the typical case, you have to add 0 to the list of allowed UIDs as well\&.
.RE
.PP
pac_lifetime (integer)
.RS 4
Lifetime of the PAC entry in seconds\&. As long as the PAC is valid the PAC data can be used to determine the group memberships of a user\&.
.sp
Default: 300
.RE
.SS "Session recording configuration options"
.PP
Session recording works in conjunction with
\fBtlog-rec-session\fR(8), a part of tlog package, to log what users see and type when they log in on a text terminal\&. See also
\fBsssd-session-recording\fR(5)\&.
.PP
These options can be used to configure session recording\&.
.PP
scope (string)
.RS 4
One of the following strings specifying the scope of session recording:
.PP
"none"
.RS 4
No users are recorded\&.
.RE
.PP
"some"
.RS 4
Users/groups specified by
\fIusers\fR
and
\fIgroups\fR
options are recorded\&.
.RE
.PP
"all"
.RS 4
All users are recorded\&.
.RE
.sp
Default: "none"
.RE
.PP
users (string)
.RS 4
A comma\-separated list of users which should have session recording enabled\&. Matches user names as returned by NSS\&. I\&.e\&. after the possible space replacement, case changes, etc\&.
.sp
Default: Empty\&. Matches no users\&.
.RE
.PP
groups (string)
.RS 4
A comma\-separated list of groups, members of which should have session recording enabled\&. Matches group names as returned by NSS\&. I\&.e\&. after the possible space replacement, case changes, etc\&.
.sp
NOTE: using this option (having it set to anything) has a considerable performance cost, because each uncached request for a user requires retrieving and matching the groups the user is member of\&.
.sp
Default: Empty\&. Matches no groups\&.
.RE
.SH "DOMAIN SECTIONS"
.PP
These configuration options can be present in a domain configuration section, that is, in a section called
\(lq[domain/\fINAME\fR]\(rq
.PP
domain_type (string)
.RS 4
Specifies whether the domain is meant to be used by POSIX\-aware clients such as the Name Service Switch or by applications that do not need POSIX data to be present or generated\&. Only objects from POSIX domains are available to the operating system interfaces and utilities\&.
.sp
Allowed values for this option are
\(lqposix\(rq
and
\(lqapplication\(rq\&.
.sp
POSIX domains are reachable by all services\&. Application domains are only reachable from the InfoPipe responder (see
\fBsssd-ifp\fR(5)) and the PAM responder\&.
.sp
NOTE: The application domains are currently well tested with
\(lqid_provider=ldap\(rq
only\&.
.sp
For an easy way to configure a non\-POSIX domains, please see the
\(lqApplication domains\(rq
section\&.
.sp
Default: posix
.RE
.PP
min_id,max_id (integer)
.RS 4
UID and GID limits for the domain\&. If a domain contains an entry that is outside these limits, it is ignored\&.
.sp
For users, this affects the primary GID limit\&. The user will not be returned to NSS if either the UID or the primary GID is outside the range\&. For non\-primary group memberships, those that are in range will be reported as expected\&.
.sp
These ID limits affect even saving entries to cache, not only returning them by name or ID\&.
.sp
Default: 1 for min_id, 0 (no limit) for max_id
.RE
.PP
enumerate (bool)
.RS 4
Determines if a domain can be enumerated, that is, whether the domain can list all the users and group it contains\&. Note that it is not required to enable enumeration in order for secondary groups to be displayed\&. This parameter can have one of the following values:
.sp
TRUE = Users and groups are enumerated
.sp
FALSE = No enumerations for this domain
.sp
Default: FALSE
.sp
Enumerating a domain requires SSSD to download and store ALL user and group entries from the remote server\&.
.sp
Note: Enabling enumeration has a moderate performance impact on SSSD while enumeration is running\&. It may take up to several minutes after SSSD startup to fully complete enumerations\&. During this time, individual requests for information will go directly to LDAP, though it may be slow, due to the heavy enumeration processing\&. Saving a large number of entries to cache after the enumeration completes might also be CPU intensive as the memberships have to be recomputed\&. This can lead to the
\(lqsssd_be\(rq
process becoming unresponsive or even restarted by the internal watchdog\&.
.sp
While the first enumeration is running, requests for the complete user or group lists may return no results until it completes\&.
.sp
Further, enabling enumeration may increase the time necessary to detect network disconnection, as longer timeouts are required to ensure that enumeration lookups are completed successfully\&. For more information, refer to the man pages for the specific id_provider in use\&.
.sp
For the reasons cited above, enabling enumeration is not recommended, especially in large environments\&.
.RE
.PP
subdomain_enumerate (string)
.RS 4
Whether any of autodetected trusted domains should be enumerated\&. The supported values are:
.PP
all
.RS 4
All discovered trusted domains will be enumerated
.RE
.PP
none
.RS 4
No discovered trusted domains will be enumerated
.RE
.sp
Optionally, a list of one or more domain names can enable enumeration just for these trusted domains\&.
.sp
Default: none
.RE
.PP
entry_cache_timeout (integer)
.RS 4
How many seconds should nss_sss consider entries valid before asking the backend again
.sp
The cache expiration timestamps are stored as attributes of individual objects in the cache\&. Therefore, changing the cache timeout only has effect for newly added or expired entries\&. You should run the
\fBsss_cache\fR(8)
tool in order to force refresh of entries that have already been cached\&.
.sp
Default: 5400
.RE
.PP
entry_cache_user_timeout (integer)
.RS 4
How many seconds should nss_sss consider user entries valid before asking the backend again
.sp
Default: entry_cache_timeout
.RE
.PP
entry_cache_group_timeout (integer)
.RS 4
How many seconds should nss_sss consider group entries valid before asking the backend again
.sp
Default: entry_cache_timeout
.RE
.PP
entry_cache_netgroup_timeout (integer)
.RS 4
How many seconds should nss_sss consider netgroup entries valid before asking the backend again
.sp
Default: entry_cache_timeout
.RE
.PP
entry_cache_service_timeout (integer)
.RS 4
How many seconds should nss_sss consider service entries valid before asking the backend again
.sp
Default: entry_cache_timeout
.RE
.PP
entry_cache_sudo_timeout (integer)
.RS 4
How many seconds should sudo consider rules valid before asking the backend again
.sp
Default: entry_cache_timeout
.RE
.PP
entry_cache_autofs_timeout (integer)
.RS 4
How many seconds should the autofs service consider automounter maps valid before asking the backend again
.sp
Default: entry_cache_timeout
.RE
.PP
entry_cache_ssh_host_timeout (integer)
.RS 4
How many seconds to keep a host ssh key after refresh\&. IE how long to cache the host key for\&.
.sp
Default: entry_cache_timeout
.RE
.PP
refresh_expired_interval (integer)
.RS 4
Specifies how many seconds SSSD has to wait before triggering a background refresh task which will refresh all expired or nearly expired records\&.
.sp
The background refresh will process users, groups and netgroups in the cache\&. For users who have performed the initgroups (get group membership for user, typically ran at login) operation in the past, both the user entry and the group membership are updated\&.
.sp
This option is automatically inherited for all trusted domains\&.
.sp
You can consider setting this value to 3/4 * entry_cache_timeout\&.
.sp
Default: 0 (disabled)
.RE
.PP
cache_credentials (bool)
.RS 4
Determines if user credentials are also cached in the local LDB cache
.sp
User credentials are stored in a SHA512 hash, not in plaintext
.sp
Default: FALSE
.RE
.PP
cache_credentials_minimal_first_factor_length (int)
.RS 4
If 2\-Factor\-Authentication (2FA) is used and credentials should be saved this value determines the minimal length the first authentication factor (long term password) must have to be saved as SHA512 hash into the cache\&.
.sp
This should avoid that the short PINs of a PIN based 2FA scheme are saved in the cache which would make them easy targets for brute\-force attacks\&.
.sp
Default: 8
.RE
.PP
account_cache_expiration (integer)
.RS 4
Number of days entries are left in cache after last successful login before being removed during a cleanup of the cache\&. 0 means keep forever\&. The value of this parameter must be greater than or equal to offline_credentials_expiration\&.
.sp
Default: 0 (unlimited)
.RE
.PP
pwd_expiration_warning (integer)
.RS 4
Display a warning N days before the password expires\&.
.sp
If zero is set, then this filter is not applied, i\&.e\&. if the expiration warning was received from backend server, it will automatically be displayed\&.
.sp
Please note that the backend server has to provide information about the expiration time of the password\&. If this information is missing, sssd cannot display a warning\&. Also an auth provider has to be configured for the backend\&.
.sp
Default: 7 (Kerberos), 0 (LDAP)
.RE
.PP
id_provider (string)
.RS 4
The identification provider used for the domain\&. Supported ID providers are:
.sp
\(lqproxy\(rq: Support a legacy NSS provider\&.
.sp
\(lqfiles\(rq: FILES provider\&. See
\fBsssd-files\fR(5)
for more information on how to mirror local users and groups into SSSD\&.
.sp
\(lqldap\(rq: LDAP provider\&. See
\fBsssd-ldap\fR(5)
for more information on configuring LDAP\&.
.sp
\(lqipa\(rq: FreeIPA and Red Hat Enterprise Identity Management provider\&. See
\fBsssd-ipa\fR(5)
for more information on configuring FreeIPA\&.
.sp
\(lqad\(rq: Active Directory provider\&. See
\fBsssd-ad\fR(5)
for more information on configuring Active Directory\&.
.RE
.PP
use_fully_qualified_names (bool)
.RS 4
Use the full name and domain (as formatted by the domain\*(Aqs full_name_format) as the user\*(Aqs login name reported to NSS\&.
.sp
If set to TRUE, all requests to this domain must use fully qualified names\&. For example, if used in LOCAL domain that contains a "test" user,
\fBgetent passwd test\fR
wouldn\*(Aqt find the user while
\fBgetent passwd test@LOCAL\fR
would\&.
.sp
NOTE: This option has no effect on netgroup lookups due to their tendency to include nested netgroups without qualified names\&. For netgroups, all domains will be searched when an unqualified name is requested\&.
.sp
Default: FALSE (TRUE if default_domain_suffix is used)
.RE
.PP
ignore_group_members (bool)
.RS 4
Do not return group members for group lookups\&.
.sp
If set to TRUE, the group membership attribute is not requested from the ldap server, and group members are not returned when processing group lookup calls, such as
\fBgetgrnam\fR(3)
or
\fBgetgrgid\fR(3)\&. As an effect,
\(lqgetent group $groupname\(rq
would return the requested group as if it was empty\&.
.sp
Enabling this option can also make access provider checks for group membership significantly faster, especially for groups containing many members\&.
.sp
Default: FALSE
.RE
.PP
auth_provider (string)
.RS 4
The authentication provider used for the domain\&. Supported auth providers are:
.sp
\(lqldap\(rq
for native LDAP authentication\&. See
\fBsssd-ldap\fR(5)
for more information on configuring LDAP\&.
.sp
\(lqkrb5\(rq
for Kerberos authentication\&. See
\fBsssd-krb5\fR(5)
for more information on configuring Kerberos\&.
.sp
\(lqipa\(rq: FreeIPA and Red Hat Enterprise Identity Management provider\&. See
\fBsssd-ipa\fR(5)
for more information on configuring FreeIPA\&.
.sp
\(lqad\(rq: Active Directory provider\&. See
\fBsssd-ad\fR(5)
for more information on configuring Active Directory\&.
.sp
\(lqproxy\(rq
for relaying authentication to some other PAM target\&.
.sp
\(lqnone\(rq
disables authentication explicitly\&.
.sp
Default:
\(lqid_provider\(rq
is used if it is set and can handle authentication requests\&.
.RE
.PP
access_provider (string)
.RS 4
The access control provider used for the domain\&. There are two built\-in access providers (in addition to any included in installed backends) Internal special providers are:
.sp
\(lqpermit\(rq
always allow access\&. It\*(Aqs the only permitted access provider for a local domain\&.
.sp
\(lqdeny\(rq
always deny access\&.
.sp
\(lqldap\(rq
for native LDAP authentication\&. See
\fBsssd-ldap\fR(5)
for more information on configuring LDAP\&.
.sp
\(lqipa\(rq: FreeIPA and Red Hat Enterprise Identity Management provider\&. See
\fBsssd-ipa\fR(5)
for more information on configuring FreeIPA\&.
.sp
\(lqad\(rq: Active Directory provider\&. See
\fBsssd-ad\fR(5)
for more information on configuring Active Directory\&.
.sp
\(lqsimple\(rq
access control based on access or deny lists\&. See
\fBsssd-simple\fR(5)
for more information on configuring the simple access module\&.
.sp
\(lqkrb5\(rq: \&.k5login based access control\&. See
\fBsssd-krb5\fR(5)
for more information on configuring Kerberos\&.
.sp
\(lqproxy\(rq
for relaying access control to another PAM module\&.
.sp
Default:
\(lqpermit\(rq
.RE
.PP
chpass_provider (string)
.RS 4
The provider which should handle change password operations for the domain\&. Supported change password providers are:
.sp
\(lqldap\(rq
to change a password stored in a LDAP server\&. See
\fBsssd-ldap\fR(5)
for more information on configuring LDAP\&.
.sp
\(lqkrb5\(rq
to change the Kerberos password\&. See
\fBsssd-krb5\fR(5)
for more information on configuring Kerberos\&.
.sp
\(lqipa\(rq: FreeIPA and Red Hat Enterprise Identity Management provider\&. See
\fBsssd-ipa\fR(5)
for more information on configuring FreeIPA\&.
.sp
\(lqad\(rq: Active Directory provider\&. See
\fBsssd-ad\fR(5)
for more information on configuring Active Directory\&.
.sp
\(lqproxy\(rq
for relaying password changes to some other PAM target\&.
.sp
\(lqnone\(rq
disallows password changes explicitly\&.
.sp
Default:
\(lqauth_provider\(rq
is used if it is set and can handle change password requests\&.
.RE
.PP
sudo_provider (string)
.RS 4
The SUDO provider used for the domain\&. Supported SUDO providers are:
.sp
\(lqldap\(rq
for rules stored in LDAP\&. See
\fBsssd-ldap\fR(5)
for more information on configuring LDAP\&.
.sp
\(lqipa\(rq
the same as
\(lqldap\(rq
but with IPA default settings\&.
.sp
\(lqad\(rq
the same as
\(lqldap\(rq
but with AD default settings\&.
.sp
\(lqnone\(rq
disables SUDO explicitly\&.
.sp
Default: The value of
\(lqid_provider\(rq
is used if it is set\&.
.sp
The detailed instructions for configuration of sudo_provider are in the manual page
\fBsssd-sudo\fR(5)\&. There are many configuration options that can be used to adjust the behavior\&. Please refer to "ldap_sudo_*" in
\fBsssd-ldap\fR(5)\&.
.sp
\fINOTE:\fR
Sudo rules are periodically downloaded in the background unless the sudo provider is explicitly disabled\&. Set
\fIsudo_provider = None\fR
to disable all sudo\-related activity in SSSD if you do not want to use sudo with SSSD at all\&.
.RE
.PP
selinux_provider (string)
.RS 4
The provider which should handle loading of selinux settings\&. Note that this provider will be called right after access provider ends\&. Supported selinux providers are:
.sp
\(lqipa\(rq
to load selinux settings from an IPA server\&. See
\fBsssd-ipa\fR(5)
for more information on configuring IPA\&.
.sp
\(lqnone\(rq
disallows fetching selinux settings explicitly\&.
.sp
Default:
\(lqid_provider\(rq
is used if it is set and can handle selinux loading requests\&.
.RE
.PP
subdomains_provider (string)
.RS 4
The provider which should handle fetching of subdomains\&. This value should be always the same as id_provider\&. Supported subdomain providers are:
.sp
\(lqipa\(rq
to load a list of subdomains from an IPA server\&. See
\fBsssd-ipa\fR(5)
for more information on configuring IPA\&.
.sp
\(lqad\(rq
to load a list of subdomains from an Active Directory server\&. See
\fBsssd-ad\fR(5)
for more information on configuring the AD provider\&.
.sp
\(lqnone\(rq
disallows fetching subdomains explicitly\&.
.sp
Default: The value of
\(lqid_provider\(rq
is used if it is set\&.
.RE
.PP
session_provider (string)
.RS 4
The provider which configures and manages user session related tasks\&. The only user session task currently provided is the integration with Fleet Commander, which works only with IPA\&. Supported session providers are:
.sp
\(lqipa\(rq
to allow performing user session related tasks\&.
.sp
\(lqnone\(rq
does not perform any kind of user session related tasks\&.
.sp
Default:
\(lqid_provider\(rq
is used if it is set and can perform session related tasks\&.
.sp
\fINOTE:\fR
In order to have this feature working as expected SSSD must be running as "root" and not as the unprivileged user\&.
.RE
.PP
autofs_provider (string)
.RS 4
The autofs provider used for the domain\&. Supported autofs providers are:
.sp
\(lqldap\(rq
to load maps stored in LDAP\&. See
\fBsssd-ldap\fR(5)
for more information on configuring LDAP\&.
.sp
\(lqipa\(rq
to load maps stored in an IPA server\&. See
\fBsssd-ipa\fR(5)
for more information on configuring IPA\&.
.sp
\(lqad\(rq
to load maps stored in an AD server\&. See
\fBsssd-ad\fR(5)
for more information on configuring the AD provider\&.
.sp
\(lqnone\(rq
disables autofs explicitly\&.
.sp
Default: The value of
\(lqid_provider\(rq
is used if it is set\&.
.RE
.PP
hostid_provider (string)
.RS 4
The provider used for retrieving host identity information\&. Supported hostid providers are:
.sp
\(lqipa\(rq
to load host identity stored in an IPA server\&. See
\fBsssd-ipa\fR(5)
for more information on configuring IPA\&.
.sp
\(lqnone\(rq
disables hostid explicitly\&.
.sp
Default: The value of
\(lqid_provider\(rq
is used if it is set\&.
.RE
.PP
re_expression (string)
.RS 4
Regular expression for this domain that describes how to parse the string containing user name and domain into these components\&. The "domain" can match either the SSSD configuration domain name, or, in the case of IPA trust subdomains and Active Directory domains, the flat (NetBIOS) name of the domain\&.
.sp
Default for the AD and IPA provider:
\(lq(((?P<domain>[^\e\e]+)\e\e(?P<name>\&.+$))|((?P<name>[^@]+)@(?P<domain>\&.+$))|(^(?P<name>[^@\e\e]+)$))\(rq
which allows three different styles for user names:
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
username
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
username@domain\&.name
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
domain\eusername
.RE
.sp
While the first two correspond to the general default the third one is introduced to allow easy integration of users from Windows domains\&.
.sp
Default:
\(lq(?P<name>[^@]+)@?(?P<domain>[^@]*$)\(rq
which translates to "the name is everything up to the
\(lq@\(rq
sign, the domain everything after that"
.sp
NOTE: Some Active Directory groups, typically those used for MS Exchange contain an
\(lq@\(rq
sign in the name, which clashes with the default re_expression value for the AD and IPA providers\&. To support these groups, consider changing the re_expression value to:
\(lq((?P<name>\&.+)@(?P<domain>[^@]+$))\(rq\&.
.RE
.PP
full_name_format (string)
.RS 4
A
\fBprintf\fR(3)\-compatible format that describes how to compose a fully qualified name from user name and domain name components\&.
.sp
The following expansions are supported:
.PP
%1$s
.RS 4
user name
.RE
.PP
%2$s
.RS 4
domain name as specified in the SSSD config file\&.
.RE
.PP
%3$s
.RS 4
domain flat name\&. Mostly usable for Active Directory domains, both directly configured or discovered via IPA trusts\&.
.RE
.sp
Default:
\(lq%1$s@%2$s\(rq\&.
.RE
.PP
lookup_family_order (string)
.RS 4
Provides the ability to select preferred address family to use when performing DNS lookups\&.
.sp
Supported values:
.sp
ipv4_first: Try looking up IPv4 address, if that fails, try IPv6
.sp
ipv4_only: Only attempt to resolve hostnames to IPv4 addresses\&.
.sp
ipv6_first: Try looking up IPv6 address, if that fails, try IPv4
.sp
ipv6_only: Only attempt to resolve hostnames to IPv6 addresses\&.
.sp
Default: ipv4_first
.RE
.PP
dns_resolver_timeout (integer)
.RS 4
Defines the amount of time (in seconds) to wait for a reply from the internal fail over service before assuming that the service is unreachable\&. If this timeout is reached, the domain will continue to operate in offline mode\&.
.sp
Please see the section
\(lqFAILOVER\(rq
for more information about the service resolution\&.
.sp
Default: 6
.RE
.PP
dns_discovery_domain (string)
.RS 4
If service discovery is used in the back end, specifies the domain part of the service discovery DNS query\&.
.sp
Default: Use the domain part of machine\*(Aqs hostname
.RE
.PP
override_gid (integer)
.RS 4
Override the primary GID value with the one specified\&.
.RE
.PP
case_sensitive (string)
.RS 4
Treat user and group names as case sensitive\&. Possible option values are:
.PP
True
.RS 4
Case sensitive\&. This value is invalid for AD provider\&.
.RE
.PP
False
.RS 4
Case insensitive\&.
.RE
.PP
Preserving
.RS 4
Same as False (case insensitive), but does not lowercase names in the result of NSS operations\&. Note that name aliases (and in case of services also protocol names) are still lowercased in the output\&.
.RE
.sp
Default: True (False for AD provider)
.RE
.PP
subdomain_inherit (string)
.RS 4
Specifies a list of configuration parameters that should be inherited by a subdomain\&. Please note that only selected parameters can be inherited\&. Currently the following options can be inherited:
.sp
ignore_group_members
.sp
ldap_purge_cache_timeout
.sp
ldap_use_tokengroups
.sp
ldap_user_principal
.sp
ldap_krb5_keytab (the value of krb5_keytab will be used if ldap_krb5_keytab is not set explicitly)
.sp
Example:
.sp
.if n \{\
.RS 4
.\}
.nf
subdomain_inherit = ldap_purge_cache_timeout
                            
.fi
.if n \{\
.RE
.\}
.sp
Default: none
.sp
Note: This option only works with the IPA and AD provider\&.
.RE
.PP
subdomain_homedir (string)
.RS 4
Use this homedir as default value for all subdomains within this domain in IPA AD trust\&. See
\fIoverride_homedir\fR
for info about possible values\&. In addition to those, the expansion below can only be used with
\fIsubdomain_homedir\fR\&.
.PP
%F
.RS 4
flat (NetBIOS) name of a subdomain\&.
.RE
.sp
The value can be overridden by
\fIoverride_homedir\fR
option\&.
.sp
Default:
/home/%d/%u
.RE
.PP
realmd_tags (string)
.RS 4
Various tags stored by the realmd configuration service for this domain\&.
.RE
.PP
cached_auth_timeout (int)
.RS 4
Specifies time in seconds since last successful online authentication for which user will be authenticated using cached credentials while SSSD is in the online mode\&. If the credentials are incorrect, SSSD falls back to online authentication\&.
.sp
This option\*(Aqs value is inherited by all trusted domains\&. At the moment it is not possible to set a different value per trusted domain\&.
.sp
Special value 0 implies that this feature is disabled\&.
.sp
Please note that if
\(lqcached_auth_timeout\(rq
is longer than
\(lqpam_id_timeout\(rq
then the back end could be called to handle
\(lqinitgroups\&.\(rq
.sp
Default: 0
.RE
.PP
auto_private_groups (string)
.RS 4
This option takes any of three available values:
.PP
true
.RS 4
Create user\*(Aqs private group unconditionally from user\*(Aqs UID number\&. The GID number is ignored in this case\&.
.sp
NOTE: Because the GID number and the user private group are inferred from the UID number, it is not supported to have multiple entries with the same UID or GID number with this option\&. In other words, enabling this option enforces uniqueness across the ID space\&.
.RE
.PP
false
.RS 4
Always use the user\*(Aqs primary GID number\&. The GID number must refer to a group object in the LDAP database\&.
.RE
.PP
hybrid
.RS 4
A primary group is autogenerated for user entries whose UID and GID numbers have the same value and at the same time the GID number does not correspond to a real group object in LDAP\&. If the values are the same, but the primary GID in the user entry is also used by a group object, the primary GID of the user resolves to that group object\&.
.sp
If the UID and GID of a user are different, then the GID must correspond to a group entry, otherwise the GID is simply not resolvable\&.
.sp
This feature is useful for environments that wish to stop maintaining a separate group objects for the user private groups, but also wish to retain the existing user private groups\&.
.RE
.sp
For subdomains, the default value is False for subdomains that use assigned POSIX IDs and True for subdomains that use automatic ID\-mapping\&.
.sp
The value of auto_private_groups can either be set per subdomains in a subsection, for example:
.sp
.if n \{\
.RS 4
.\}
.nf
[domain/forest\&.domain/sub\&.domain]
auto_private_groups = false
.fi
.if n \{\
.RE
.\}
.sp
or globally for all subdomains in the main domain section using the subdomain_inherit option:
.sp
.if n \{\
.RS 4
.\}
.nf
[domain/forest\&.domain]
subdomain_inherit = auto_private_groups
auto_private_groups = false
.fi
.if n \{\
.RE
.\}
.sp
.RE
.PP
Options valid for proxy domains\&.
.PP
proxy_pam_target (string)
.RS 4
The proxy target PAM proxies to\&.
.sp
Default: not set by default, you have to take an existing pam configuration or create a new one and add the service name here\&.
.RE
.PP
proxy_lib_name (string)
.RS 4
The name of the NSS library to use in proxy domains\&. The NSS functions searched for in the library are in the form of _nss_$(libName)_$(function), for example _nss_files_getpwent\&.
.RE
.PP
proxy_fast_alias (boolean)
.RS 4
When a user or group is looked up by name in the proxy provider, a second lookup by ID is performed to "canonicalize" the name in case the requested name was an alias\&. Setting this option to true would cause the SSSD to perform the ID lookup from cache for performance reasons\&.
.sp
Default: false
.RE
.PP
proxy_max_children (integer)
.RS 4
This option specifies the number of pre\-forked proxy children\&. It is useful for high\-load SSSD environments where sssd may run out of available child slots, which would cause some issues due to the requests being queued\&.
.sp
Default: 10
.RE
.SS "Application domains"
.PP
SSSD, with its D\-Bus interface (see
\fBsssd-ifp\fR(5)) is appealing to applications as a gateway to an LDAP directory where users and groups are stored\&. However, contrary to the traditional SSSD deployment where all users and groups either have POSIX attributes or those attributes can be inferred from the Windows SIDs, in many cases the users and groups in the application support scenario have no POSIX attributes\&. Instead of setting a
\(lq[domain/\fINAME\fR]\(rq
section, the administrator can set up an
\(lq[application/\fINAME\fR]\(rq
section that internally represents a domain with type
\(lqapplication\(rq
optionally inherits settings from a tradition SSSD domain\&.
.PP
Please note that the application domain must still be explicitly enabled in the
\(lqdomains\(rq
parameter so that the lookup order between the application domain and its POSIX sibling domain is set correctly\&.
.PP
\fBApplication domain parameters\fR
.PP
inherit_from (string)
.RS 4
The SSSD POSIX\-type domain the application domain inherits all settings from\&. The application domain can moreover add its own settings to the application settings that augment or override the
\(lqsibling\(rq
domain settings\&.
.sp
Default: Not set
.RE
.PP
The following example illustrates the use of an application domain\&. In this setup, the POSIX domain is connected to an LDAP server and is used by the OS through the NSS responder\&. In addition, the application domain also requests the telephoneNumber attribute, stores it as the phone attribute in the cache and makes the phone attribute reachable through the D\-Bus interface\&.
.sp
.if n \{\
.RS 4
.\}
.nf
[sssd]
domains = appdom, posixdom

[ifp]
user_attributes = +phone

[domain/posixdom]
id_provider = ldap
ldap_uri = ldap://ldap\&.example\&.com
ldap_search_base = dc=example,dc=com

[application/appdom]
inherit_from = posixdom
ldap_user_extra_attrs = phone:telephoneNumber
.fi
.if n \{\
.RE
.\}
.SH "TRUSTED DOMAIN SECTION"
.PP
Some options used in the domain section can also be used in the trusted domain section, that is, in a section called
\(lq[domain/\fIDOMAIN_NAME\fR/\fITRUSTED_DOMAIN_NAME\fR]\(rq\&. Where DOMAIN_NAME is the actual joined\-to base domain\&. Please refer to examples below for explanation\&. Currently supported options in the trusted domain section are:
.PP
ldap_search_base,
.PP
ldap_user_search_base,
.PP
ldap_group_search_base,
.PP
ldap_netgroup_search_base,
.PP
ldap_service_search_base,
.PP
ldap_sasl_mech,
.PP
ad_server,
.PP
ad_backup_server,
.PP
ad_site,
.PP
use_fully_qualified_names
.PP
For more details about these options see their individual description in the manual page\&.
.SH "CERTIFICATE MAPPING SECTION"
.PP
To allow authentication with Smartcards and certificates SSSD must be able to map certificates to users\&. This can be done by adding the full certificate to the LDAP object of the user or to a local override\&. While using the full certificate is required to use the Smartcard authentication feature of SSH (see
\fBsss_ssh_authorizedkeys\fR(8)
for details) it might be cumbersome or not even possible to do this for the general case where local services use PAM for authentication\&.
.PP
To make the mapping more flexible mapping and matching rules were added to SSSD (see
\fBsss-certmap\fR(5)
for details)\&.
.PP
A mapping and matching rule can be added to the SSSD configuration in a section on its own with a name like
\(lq[certmap/\fIDOMAIN_NAME\fR/\fIRULE_NAME\fR]\(rq\&. In this section the following options are allowed:
.PP
matchrule (string)
.RS 4
Only certificates from the Smartcard which matches this rule will be processed, all others are ignored\&.
.sp
Default: KRB5:<EKU>clientAuth, i\&.e\&. only certificates which have the Extended Key Usage
\(lqclientAuth\(rq
.RE
.PP
maprule (string)
.RS 4
Defines how the user is found for a given certificate\&.
.sp
Default:
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
LDAP:(userCertificate;binary={cert!bin}) for LDAP based providers like
\(lqldap\(rq,
\(lqAD\(rq
or
\(lqipa\(rq\&.
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
The RULE_NAME for the
\(lqfiles\(rq
provider which tries to find a user with the same name\&.
.RE
.sp
.RE
.PP
domains (string)
.RS 4
Comma separated list of domain names the rule should be applied\&. By default a rule is only valid in the domain configured in sssd\&.conf\&. If the provider supports subdomains this option can be used to add the rule to subdomains as well\&.
.sp
Default: the configured domain in sssd\&.conf
.RE
.PP
priority (integer)
.RS 4
Unsigned integer value defining the priority of the rule\&. The higher the number the lower the priority\&.
\(lq0\(rq
stands for the highest priority while
\(lq4294967295\(rq
is the lowest\&.
.sp
Default: the lowest priority
.RE
.PP
To make the configuration simple and reduce the amount of configuration options the
\(lqfiles\(rq
provider has some special properties:
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
if maprule is not set the RULE_NAME name is assumed to be the name of the matching user
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
if a maprule is used both a single user name or a template like
\(lq{subject_rfc822_name\&.short_name}\(rq
must be in braces like e\&.g\&.
\(lq(username)\(rq
or
\(lq({subject_rfc822_name\&.short_name})\(rq
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
the
\(lqdomains\(rq
option is ignored
.RE
.sp
.SH "PROMPTING CONFIGURATION SECTION"
.PP
If a special file (/var/lib/sss/pubconf/pam_preauth_available) exists SSSD\*(Aqs PAM module pam_sss will ask SSSD to figure out which authentication methods are available for the user trying to log in\&. Based on the results pam_sss will prompt the user for appropriate credentials\&.
.PP
With the growing number of authentication methods and the possibility that there are multiple ones for a single user the heuristic used by pam_sss to select the prompting might not be suitable for all use cases\&. The following options should provide a better flexibility here\&.
.PP
Each supported authentication method has its own configuration subsection under
\(lq[prompting/\&.\&.\&.]\(rq\&. Currently there are:
.PP
[prompting/password]
.RS 4
to configure password prompting, allowed options are:
.PP
password_prompt
.RS 4
to change the string of the password prompt
.RE
.sp
.RE
.PP
[prompting/2fa]
.RS 4
to configure two\-factor authentication prompting, allowed options are:
.PP
first_prompt
.RS 4
to change the string of the prompt for the first factor
.RE
.PP
second_prompt
.RS 4
to change the string of the prompt for the second factor
.RE
.PP
single_prompt
.RS 4
boolean value, if True there will be only a single prompt using the value of first_prompt where it is expected that both factors are entered as a single string
.RE
.sp
.RE
.PP
It is possible to add a subsection for specific PAM services, e\&.g\&.
\(lq[prompting/password/sshd]\(rq
to individual change the prompting for this service\&.
.SH "EXAMPLES"
.PP
1\&. The following example shows a typical SSSD config\&. It does not describe configuration of the domains themselves \- refer to documentation on configuring domains for more details\&.
.sp
.if n \{\
.RS 4
.\}
.nf
[sssd]
domains = LDAP
services = nss, pam
config_file_version = 2

[nss]
filter_groups = root
filter_users = root

[pam]

[domain/LDAP]
id_provider = ldap
ldap_uri = ldap://ldap\&.example\&.com
ldap_search_base = dc=example,dc=com

auth_provider = krb5
krb5_server = kerberos\&.example\&.com
krb5_realm = EXAMPLE\&.COM
cache_credentials = true

min_id = 10000
max_id = 20000
enumerate = False
.fi
.if n \{\
.RE
.\}
.PP
2\&. The following example shows configuration of IPA AD trust where the AD forest consists of two domains in a parent\-child structure\&. Suppose IPA domain (ipa\&.com) has trust with AD domain(ad\&.com)\&. ad\&.com has child domain (child\&.ad\&.com)\&. To enable shortnames in the child domain the following configuration should be used\&.
.sp
.if n \{\
.RS 4
.\}
.nf
[domain/ipa\&.com/child\&.ad\&.com]
use_fully_qualified_names = false
.fi
.if n \{\
.RE
.\}
.PP
3\&. The following example shows the configuration for two certificate mapping rules\&. The first is valid for the configured domain
\(lqmy\&.domain\(rq
and additionally for the subdomains
\(lqyour\&.domain\(rq
and uses the full certificate in the search filter\&. The second example is valid for the domain
\(lqfiles\(rq
where it is assumed the files provider is used for this domain and contains a matching rule for the local user
\(lqmyname\(rq\&.
.sp
.if n \{\
.RS 4
.\}
.nf
[certmap/my\&.domain/rule_name]
matchrule = <ISSUER>^CN=My\-CA,DC=MY,DC=DOMAIN$
maprule = (userCertificate;binary={cert!bin})
domains = my\&.domain, your\&.domain
priority = 10

[certmap/files/myname]
matchrule = <ISSUER>^CN=My\-CA,DC=MY,DC=DOMAIN$<SUBJECT>^CN=User\&.Name,DC=MY,DC=DOMAIN$
.fi
.if n \{\
.RE
.\}
.sp
.SH "SEE ALSO"
.PP
\fBsssd\fR(8),
\fBsssd.conf\fR(5),
\fBsssd-ldap\fR(5),
\fBsssd-krb5\fR(5),
\fBsssd-simple\fR(5),
\fBsssd-ipa\fR(5),
\fBsssd-ad\fR(5),
\fBsssd-files\fR(5),
\fBsssd-sudo\fR(5),
\fBsssd-session-recording\fR(5),
\fBsss_cache\fR(8),
\fBsss_debuglevel\fR(8),
\fBsss_obfuscate\fR(8),
\fBsss_seed\fR(8),
\fBsssd_krb5_locator_plugin\fR(8),
\fBsss_ssh_authorizedkeys\fR(8), \fBsss_ssh_knownhostsproxy\fR(8),
\fBsssd-ifp\fR(5),
\fBpam_sss\fR(8)\&.
\fBsss_rpcidmapd\fR(5)
.SH "AUTHORS"
.PP
\fBThe SSSD upstream \- https://pagure\&.io/SSSD/sssd/\fR
